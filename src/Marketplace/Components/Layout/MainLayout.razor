@inherits LayoutComponentBase
@using MudBlazor

<MudThemeProvider Theme="_myCustomTheme" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    @if (_isSearchVisible)
    {
        <Search OnClose="ToggleSearch" />
    }
    else
    {
        <MudAppBar Elevation="0" Fixed="true" Class="stacked-app-bar" Style="background-color: #1D1E23; color: #F7F7F7;">
            <CustomAppBar OnSearchClick="ToggleSearch" />
        </MudAppBar>

        <MudMainContent Class="main-content-padded">
            <MudContainer MaxWidth="MaxWidth.Large" Class="py-4">
                @Body
            </MudContainer>
        </MudMainContent>
    }
</MudLayout>

<style>
    .stacked-app-bar > .mud-toolbar-appbar {
        flex-direction: column;
        align-items: stretch;
        height: auto;
    }

    .sub-nav-tabs .mud-tab {
        color: #808080;
        text-transform: none;
    }

        .sub-nav-tabs .mud-tab.mud-tab-active {
            color: #FFFFFF !important;
        }

    .sub-nav-tabs .mud-tabs-indicator {
        background-color: #0081EC !important;
        height: 1px !important;
    }
</style>

@code {
    private bool _isSearchVisible = false;

    private void ToggleSearch()
    {
        _isSearchVisible = !_isSearchVisible;
    }
    
    private bool _drawerOpen = true;

    private void ToggleDrawer()
    {
        _drawerOpen = !_drawerOpen;
    }

    private readonly MudTheme _myCustomTheme = new()
    {
        PaletteLight = new PaletteLight()
        {
            Primary = "#0081EC", 
            AppbarBackground = "#1D1E23",
            AppbarText = "#808080",
            Background = "#121315",
            TextPrimary = "#F7F7F7",
            Surface = "#1D1E23"
        },
        Typography = new Typography()
        {
            Default = new DefaultTypography() { FontFamily = new[] { "Nimbus Sans D OT", "sans-serif" } },
            H6 = new H6Typography() { FontSize = "22px", FontWeight = "700" }
        }
    };
}
