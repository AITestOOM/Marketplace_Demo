@inherits LayoutComponentBase
@using MudBlazor

<MudThemeProvider Theme="_myCustomTheme" />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />

<MudLayout>
    @if (_isSearchVisible)
    {
        <Search OnClose="ToggleSearch" />
    }
    else if (_isMenuVisible)
    {
        <MenuView OnClose="ToggleMenu" />
    }
    else
    {
        <MudAppBar Elevation="0" Fixed="true" Class="stacked-app-bar" Style="background-color: #1D1E23; color: #F7F7F7;">
            <CustomAppBar OnSearchClick="ToggleSearch" OnMenuClick="ToggleMenu"/>
        </MudAppBar>
        <MudMainContent>
            <MudContainer MaxWidth="MaxWidth.Large" Class="py-4">
                @Body
            </MudContainer>
        </MudMainContent>
    }
</MudLayout>

<style>
    .stacked-app-bar > .mud-toolbar-appbar {
        flex-direction: column;
        align-items: stretch;
        height: auto;
    }
</style>

@code {
    private bool _isSearchVisible = false;
    private bool _isMenuVisible = false;

    private void ToggleSearch()
    {
        _isSearchVisible = !_isSearchVisible;
    }

    private void ToggleMenu()
    {
        _isMenuVisible = !_isMenuVisible;
    }
    
    private bool _drawerOpen = true;

    private void ToggleDrawer()
    {
        _drawerOpen = !_drawerOpen;
    }

    private readonly MudTheme _myCustomTheme = new()
    {
        PaletteLight = new PaletteLight()
        {
            Primary = "#0081EC", 
            AppbarBackground = "#1D1E23",
            AppbarText = "#808080",
            Background = "#121315",
            TextPrimary = "#F7F7F7",
            Surface = "#1D1E23"
        },
        Typography = new Typography()
        {
            Default = new DefaultTypography() { FontFamily = new[] { "Nimbus Sans D OT", "sans-serif" } },
            H6 = new H6Typography() { FontSize = "22px", FontWeight = "700" }
        }
    };
}
